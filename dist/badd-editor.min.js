!function(){var e=angular.module("baddEditor",[]),t=function(e,t){e.pageTitleChanged=function(){t.changePageTitle(e.pageTitle)},e.componentsTitle=angular.isDefined(e.componentsTitle)?e.componentsTitle:"Components",e.draggables=[{title:"Container",icon:"fa-square-o",element:'<div class="container"><div class="row"><div class="col-xs-12"><p>A simple row with a single column</p></div></div></div>'},{title:"Row",icon:"fa-align-justify",element:'<div class="row"><div class="col-xs-12"><p>A simple row with a single column</p></div></div>'},{title:"Column",icon:"fa-columns",element:'<div class="col-xs-12"><p>You can make me a smaller column</p></div>'},{title:"Header 1",icon:"fa-header",element:"<h1>An important title</h1>"},{title:"Paragraph",icon:"fa-align-left",element:"<p>Write something useful here</p>"},{title:"Button",icon:"fa-plus-square",element:'<button class="btn btn-primary">My brand new button</button>'},{title:"Image",icon:"fa-picture-o",element:'<img src="http://www.avjobs.com/images/v_png_v5/v_collection_png/256x256/shadow/airplane2.png"alt="airplane">'}],e.buttons=[{label:"Arial",tooltip:"Font",icon:"caret"},{label:"11",tooltip:"Font size",icon:"fa fa-caret-down",separate:"btn-separate"},{label:"",tooltip:"Bold",icon:"fa fa-bold",action:t.bold},{label:"",tooltip:"Italic",icon:"fa fa-italic"},{label:"",tooltip:"Underline",icon:"fa fa-underline",separate:"btn-separate"},{label:"F",tooltip:"",icon:"Font color"},{label:"",tooltip:"Background color",icon:"fa fa-square",separate:"btn-separate"},{label:"",tooltip:"Align left",icon:"fa fa-align-left",action:t.alignLeft},{label:"",tooltip:"Align center",icon:"fa fa-align-center",action:t.alignCenter},{label:"",tooltip:"Align right",icon:"fa fa-align-right",action:t.alignRight},{label:"",tooltip:"Justify",icon:"fa fa-align-justify",separate:"btn-separate",action:t.justify},{label:"",tooltip:"Ordered list",icon:"fa fa-list-ol",action:t.orderedList},{label:"",tooltip:"Unordered list",icon:"fa fa-list-ul",action:t.unorderedList}],e.execute=function(e){t.executeAction(e)}};t.$inject=["$scope","editorService"];var i=function(e){return{restrict:"E",templateUrl:"badd-editor.html",scope:{title:"@",componentsTitle:"@",template:"@"},controller:t,link:function(t,i,n){var a=i.find("iframe");a.attr("src",n.template),a.on("load",e.initializeFrame(a,t))}}};i.$inject=["editorService"],e.directive("baddEditor",i);var n=function(e,t,i,n,a){function o(e,t){var i=e.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("href",t),i.setAttribute("type","text/css"),e.querySelector("head").appendChild(i)}function l(){c()||(d.iframeDocument.designMode="on",d.iframeDocument.execCommand("StyleWithCSS",!1,!0))}function r(){c()||(d.iframeDocument.designMode="off")}function c(){return null==d.ie11&&(d.ie11=!window.ActiveXObject&&"ActiveXObject"in window),d.ie11}var d=this;d.editableTags=["H1","H2","H3","H4","H5","H6","H7","P","B","A","UL","OL","LI","BTN"],d.initializeFrame=function(l,r){return function(){d.document=n[0],d.iframe=l[0],t.setup(a),i.setup(a),e.setup(a,t,i),d.iframePosition=d.iframe.getBoundingClientRect(),d.iframeDocument=d.iframe.contentDocument,d.frameHtml=d.iframeDocument.querySelector("html"),d.frameHead=d.iframeDocument.querySelector("head"),d.frameBody=d.iframeDocument.querySelector("body"),d.pageTitle=d.iframeDocument.querySelector("title"),d.pageTitle?r.$apply(function(){r.pageTitle=d.pageTitle.textContent}):d.pageTitle=d.document.createElement("title"),d.frameHtml.setAttribute("ng-app","baddEditor"),o(d.iframeDocument,"badd-editor-frame.min.css"),d.frameBody.setAttribute("badd-droppable",""),d.frameBody.setAttribute("badd-configurable",""),d.scope=r}},d.changePageTitle=function(e){d.pageTitle.textContent=e},d.mouseHovering=function(e){e.stopPropagation(),e.preventDefault(),_.contains(e.target.classList,"badd-avoid-dd")||belongsTo(e.target,d.elementBeingEdited)||i.showHighlightBorder(e.target)},d.executeAction=function(e){if(null!=d.lastSelectedElement||null!=d.elementBeingEdited){if(l(),null==d.elementBeingEdited){var t=d.iframeDocument.defaultView.getSelection(),i=d.iframeDocument.createRange();i.setStart(d.lastSelectedElement,0),i.setEnd(d.lastSelectedElement,0),t.removeAllRanges(),t.addRange(i)}e(),r()}},d.alignLeft=function(){d.iframeDocument.execCommand("justifyleft",!1)},d.alignRight=function(){d.iframeDocument.execCommand("justifyright",!1)},d.alignCenter=function(){d.iframeDocument.execCommand("justifyCenter",!1)},d.justify=function(){d.iframeDocument.execCommand("justifyfull",!1)},d.bold=function(){d.iframeDocument.execCommand("bold",!1)},d.orderedList=function(){d.iframeDocument.execCommand("insertOrderedList",!1)},d.unorderedList=function(){d.iframeDocument.execCommand("insertUnorderedList",!1)}};n.$inject=["baddDragDropService","baddElementHighlighter","baddElementSelector","$document","$window"],e.service("editorService",n)}();
!function(){var e=angular.module("baddEditor"),i=function(e,i){return{restrict:"A",link:function(e,n){var t=n[0];t.addEventListener("mouseover",i.mouseHovering),t.addEventListener("click",i.mouseClick),t.addEventListener("dblclick",i.mouseDoubleClick),t.addEventListener("mouseout",i.mouseLeaving)}}};i.$inject=["$compile","editorService"],e.directive("baddConfigurable",i)}();
!function(){var e=angular.module("baddEditor"),a=function(){function e(e){e.preventDefault();var a=e.target;if(null!=a.getAttribute("badd-draggble-label"))for(;null==a.getAttribute("badd-draggable");)a=a.parentNode;null!=a.getAttribute("badd-draggable")&&(c.draggableConteiner.appendChild(a.querySelector("i").cloneNode(!0)),c.draggableIcon=c.draggableConteiner.childNodes[0],c.draggableIcon.style.display="none",c.draggableIcon.style.position="fixed",c.draggableIcon.style.fontSize="30px",c.draggableIcon.style.backgroundColor="#2385DC",c.draggableIcon.style.border="1px solid #999",c.draggableIcon.style.color="#fff",c.draggableIcon.style.padding="10px",r(e),c.draggableIcon.style.zIndex=16777220,c.transferArea.innerHTML=a.getAttribute("data-element"),c.previewElement=c.transferArea.childNodes[0],c.previewElement.style.pointerEvents="none")}function a(e){3!=e.which&&(e.preventDefault(),_.contains(f,e.target.tagName)&&(c.draggableConteiner.innerHTML='<i class="'+n(e.target)+'"></i>',c.draggableIcon=c.draggableConteiner.childNodes[0],c.draggableIcon.style.display="none",c.draggableIcon.style.position="fixed",c.draggableIcon.style.fontSize="30px",c.draggableIcon.style.backgroundColor="#2385DC",c.draggableIcon.style.border="1px solid #999",c.draggableIcon.style.color="#fff",c.draggableIcon.style.padding="10px",r(e),c.draggableIcon.style.zIndex=16777220,c.transferArea.appendChild(e.target.cloneNode(!0)),c.previewElement=c.transferArea.childNodes[0],c.previewElement.style.pointerEvents="none",c.lastDraggedElement=e.target,c.lastDraggedElement.style.pointerEvents="none"))}function n(e){var a="fa fa-question";return _.forEach(u,function(n){n.tagName===e.tagName&&(a=n.icon)}),a}function t(e){if(e.preventDefault(),c.previewElement){c.draggableConteiner.innerHTML="",c.draggableIcon=null,c.removeElement=null,c.lastDraggedElement&&(c.lastDraggedElement.style.removeProperty("pointer-events"),c.lastDraggedElement=null);for(var a=e.target;!_.contains(p,a.tagName);)a=a.parentNode;g(a)}}function r(e,a){c.draggableIcon&&(m()?(c.draggableIcon.style.left=e.screenX+20+"px",c.draggableIcon.style.top=e.screenY-120+"px"):(c.draggableIcon.style.left=e.screenX-50+"px",c.draggableIcon.style.top=e.screenY-150+"px"),a&&(c.draggableIcon.style.display="block"))}function l(){c.lastDraggedElement&&(c.lastDraggedElement.style.pointerEvents="none"),c.draggableConteiner.innerHTML="",c.draggableIcon=null,c.previewElement&&g(c.lastHoveredDroppable)}function o(e){null==c.previewElement?c.baddElementHighlighter.showHighlightBorder(e.target):(c.baddElementHighlighter.hideHighlightBorder(),c.baddElementSelector.hideSelectedHighlightBorder(),r(e,!0),i(e))}function i(e){e.stopPropagation(),e.preventDefault();for(var a=e.target;!_.contains(p,a.tagName);)a=a.parentNode;if(c.lastDraggedElement){var n=d(e,a);if(a==c.lastDraggedElement.parentNode&&(n==c.lastDraggedElement.nextElementSibling||n==c.lastDraggedElement))return;c.lastDraggedElement.parentNode.removeChild(c.lastDraggedElement),c.lastDraggedElement=null}if(0==s(a))return void(c.lastHoveredDroppable&&a!==c.previewElement&&c.previewElement.parentNode===c.lastHoveredDroppable&&c.lastHoveredDroppable.removeChild(c.previewElement));c.lastHoveredDroppable=a,c.baddElementHighlighter.showHighlightBorder(a);var t=d(e,a);if(t)try{a.insertBefore(c.previewElement,t)}catch(r){console.log("oi")}else a.appendChild(c.previewElement)}function d(e,a){var n=_.toArray(a.childNodes),t=null,r=null;return n.forEach(function(a){if(a.getBoundingClientRect&&a!=c.previewElement){var n=a.getBoundingClientRect(),l={X:n.width/2+n.left,Y:n.height/2+n.top},o=l.Y;o-n.top>30&&(o=n.top+30);var i=l.X;i-n.left>30&&(i=n.left+30),e.clientY>o&&e.clientX>i||e.clientY>n.bottom||(null==t?(t=a,r=n):r.left>=n.left&&r.top>=n.top&&(t=a,r=n))}}),t}function g(e){c.lastHoveredDroppable&&0==s(e)&&e!==c.previewElement&&c.previewElement.parentNode===c.lastHoveredDroppable&&c.lastHoveredDroppable.removeChild(c.previewElement),c.transferArea.innerHTML="",c.previewElement.style.removeProperty("pointer-events"),c.previewElement=null,c.lastHoveredDroppable=null}function s(e){return e.getAttribute&&c.previewElement&&e!==c.previewElement&&_.contains(p,e.tagName)?void 0:!1}function m(){return null==c.ie11&&(c.ie11=!window.ActiveXObject&&"ActiveXObject"in window),c.ie11}var c=this;c.mainWindow=null,c.baddElementHighlighter=null;var p=["DIV","BODY","P"],f=["DIV","IMG","P","BUTTON","A","H1","H2","H3","H4","H5","H6"],u=[{tagName:"DIV",icon:"fa fa-square-o"},{tagName:"IMG",icon:"fa fa-picture-o"},{tagName:"P",icon:"fa fa-align-left"},{tagName:"BUTTON",icon:"fa fa-plus-square"},{tagName:"A",icon:"fa fa-link"},{tagName:"H1",icon:"fa fa-header"},{tagName:"H2",icon:"fa fa-header"},{tagName:"H3",icon:"fa fa-header"},{tagName:"H4",icon:"fa fa-header"},{tagName:"H5",icon:"fa fa-header"},{tagName:"H6",icon:"fa fa-header"}];c.setup=function(n,i,d){null==c.mainWindow&&(c.baddElementHighlighter=i,c.baddElementSelector=d,c.mainWindow=n,c.mainDocument=c.mainWindow.document,c.mainBody=c.mainDocument.querySelector("body"),c.iframe=c.mainDocument.querySelector("iframe.badd-editor-browser"),c.iframeWindow=c.iframe.contentWindow,c.iframeDocument=c.iframeWindow.document,c.iframeBody=c.iframeDocument.querySelector("body"),c.mainWindow.addEventListener("mousedown",e),c.mainWindow.addEventListener("mouseup",t),c.mainWindow.addEventListener("mousemove",r),c.mainWindow.addEventListener("blur",l),c.iframeWindow.addEventListener("mousedown",a),c.iframeWindow.addEventListener("mouseup",t),c.iframeWindow.addEventListener("mousemove",o),c.draggableConteiner=c.mainDocument.createElement("svg"),c.draggableConteiner.className="badd-draggable-conteiner",c.mainBody.appendChild(c.draggableConteiner),c.transferArea=c.mainDocument.createElement("div"),c.transferArea.className="badd-transfer-area",c.mainBody.appendChild(c.transferArea))}};e.service("baddDragDropService",a)}();
!function(){var e=angular.module("baddEditor"),i=function(){function e(){"block"===i.highlightBorder.style.display&&i.lastHoveredTarget&&i.showHighlightBorder(i.lastHoveredTarget)}var i=this;i.setup=function(t){null==i.mainWindow&&(i.mainWindow=t,i.mainDocument=i.mainWindow.document,i.iframe=i.mainDocument.querySelector("iframe.badd-editor-browser"),i.iframeWindow=i.iframe.contentWindow,i.iframeDocument=i.iframeWindow.document,i.iframeBody=i.iframeDocument.querySelector("body"),i.highlightBorder=i.iframeDocument.createElement("svg"),i.highlightBorder.className="badd-highlighter",i.iframeBody.appendChild(i.highlightBorder),i.iframeDocument.addEventListener("scroll",e))},i.showHighlightBorder=function(e){var t=e.getBoundingClientRect();i.highlightBorder.style.top=t.top-3+"px",i.highlightBorder.style.left=t.left-3+"px",i.highlightBorder.style.width=e.offsetWidth+6+"px",i.highlightBorder.style.height=e.offsetHeight+6+"px",i.highlightBorder.style.display="block",i.lastHoveredTarget=e},i.hideHighlightBorder=function(){i.highlightBorder.style.display="none",i.highlightBorder.style.top=0,i.highlightBorder.style.left=0,i.highlightBorder.style.width=0,i.highlightBorder.style.height=0}};e.service("baddElementHighlighter",i)}();
!function(){var e=angular.module("baddEditor"),t=function(){function e(){l.lastSelectedElement&&l.showSelectedHighlightBorder(l.lastSelectedElement)}function t(e){if(e.preventDefault(),e.target===l.lastSelectedElement&&null==l.elementBeingEdited)return l.hideSelectedHighlightBorder(),void e.stopPropagation();if(!d(e.target,l.elementBeingEdited)&&l.elementBeingEdited!=e.target){if(e.stopPropagation(),l.elementBeingEdited&&l.elementBeingEdited!==e.target){for(var t=l.elementBeingEdited.parentNode;"BODY"!=t.tagName;)(t.getAttribute("badd-draggable")||t.getAttribute("draggable"))&&t.setAttribute("draggable","true"),t=t.parentNode;l.selectedHighlightBorder.setAttribute("class","badd-selected-highlighter badd-avoid-dd"),l.elementBeingEdited.removeAttribute("contentEditable"),l.elementBeingEdited=null}l.showSelectedHighlightBorder(e.target)}}function i(e){if(e.stopPropagation(),e.target!==l.elementBeingEdited&&!d(e.target,l.elementBeingEdited)&&(e.preventDefault(),_.contains(l.editableTags,e.target.tagName)&&!d(e.target,l.elementBeingEdited))){l.elementBeingEdited=e.target,l.elementBeingEdited.setAttribute("draggable","false");for(var t=l.elementBeingEdited.parentNode;"BODY"!=t.tagName;)(t.getAttribute("badd-draggable")||t.getAttribute("draggable"))&&t.setAttribute("draggable","false"),t=t.parentNode;l.hideHighlightBorder(),l.showSelectedHighlightBorder(l.elementBeingEdited),l.selectedHighlightBorder.setAttribute("class","badd-selected-highlighter badd-avoid-dd badd-edition-mode"),l.elementBeingEdited.contentEditable=!0;var i=l.iframe.contentWindow.getSelection();l.iframe.contentWindow.focus(),i.collapse(l.elementBeingEdited,0),l.elementBeingEdited.focus()}}function d(e,t){if(null==e||null==t||e===t)return!1;for(var i=e.parentNode;null!=i;){if(i===t)return!0;i=i.parentNode}return!1}var l=this;l.setup=function(d){null==l.mainWindow&&(l.mainWindow=d,l.mainDocument=l.mainWindow.document,l.iframe=l.mainDocument.querySelector("iframe.badd-editor-browser"),l.iframeWindow=l.iframe.contentWindow,l.iframeDocument=l.iframeWindow.document,l.iframeBody=l.iframeDocument.querySelector("body"),l.selectedHighlightBorder=l.iframeDocument.createElement("svg"),l.selectedHighlightBorder.className="badd-selected-highlighter badd-avoid-dd",l.iframeBody.appendChild(l.selectedHighlightBorder),d.addEventListener("click",l.hideSelectedHighlightBorder),l.iframeWindow.addEventListener("click",t),l.iframeWindow.addEventListener("dblclick",i),l.iframeDocument.addEventListener("scroll",e),l.iframeDocument.addEventListener("keyup",e))},l.showSelectedHighlightBorder=function(e){l.lastSelectedElement=e;var t=e.getBoundingClientRect();l.selectedHighlightBorder.style.top=t.top-3+"px",l.selectedHighlightBorder.style.left=t.left-3+"px",l.selectedHighlightBorder.style.width=e.offsetWidth+6+"px",l.selectedHighlightBorder.style.height=e.offsetHeight+6+"px",l.selectedHighlightBorder.style.display="block"},l.hideSelectedHighlightBorder=function(){l.lastSelectedElement=null,l.selectedHighlightBorder.style.display="none",l.selectedHighlightBorder.style.top=0,l.selectedHighlightBorder.style.left=0,l.selectedHighlightBorder.style.width=0,l.selectedHighlightBorder.style.height=0}};e.service("baddElementSelector",t)}();
angular.module("baddEditor").run(["$templateCache", function($templateCache) {$templateCache.put("badd-editor.html","<div class=\"badd-editor-browser-frame\">\n	<div class=\"badd-editor-browser-header\">\n		<div class=\"badd-editor-browser-header-close\"></div>\n		<div class=\"badd-editor-browser-header-min\"></div>\n		<div class=\"badd-editor-browser-header-max\"></div>\n	</div>\n	<div class=\"badd-editor-browser-address\">\n		<div class=\"badd-editor-browser-address-undo-redo\">\n			<div class=\"badd-editor-browser-address-return\">\n				<i class=\"fa fa-arrow-left\"></i>\n			</div>\n			<div class=\"badd-editor-browser-address-redo\">\n				<i class=\"fa fa-arrow-right\"></i>\n			</div>\n		</div>\n		<div class=\"badd-editor-browser-address-page-title\">\n			<input type=\"text\" class=\"form-control\" placeholder=\"Page title\"\n				   ng-model=\"pageTitle\" ng-change=\"pageTitleChanged()\">\n		</div>\n	</div>\n	<div class=\"badd-editor-dragglable-components\">\n		<p class=\"badd-editor-title\">{{componentsTitle}}</p>\n		<ul>\n			<li ng-repeat=\"draggable in draggables\" data-element=\"{{draggable.element}}\" badd-draggable>\n				<i class=\"fa {{draggable.icon}}\" badd-draggble-label></i>\n				<span class=\"badd-editor-title\" badd-draggble-label>{{draggable.title}}</span>\n			</li>\n		</ul>\n	</div>\n	<div class=\"badd-editor-browser-configuration\">\n		<button ng-repeat=\"button in buttons\" type=\"button\" title=\"{{button.tooltip}}\"\n				class=\"btn btn-default\" ng-class=\"button.separate\"\n				ng-click=\"execute(button.action)\">\n			{{button.label}} <i class=\"{{button.icon}}\"></i>\n		</button>\n	</div>\n	<iframe class=\"badd-editor-browser\"></iframe>\n	<div class=\"badd-editor-browser-footer\"></div>\n</div>");}]);
!function(){var e=function(){function e(){return t.frameDocument.all?1:0}var t=this;t.frameWindow=null,t.frameDocument=null,t.textArea=null;var n=[],i=-30;n.cut=[1,"Cut","a","cut"],n.copy=[2,"Copy","a","copy"],n.paste=[3,"Paste","a","paste"],n.bold=[4,"Bold","a","bold"],n.italic=[5,"Italic","a","italic"],n.underline=[6,"Underline","a","underline"],n.strikethrough=[7,"Strikethrough","a","strikethrough"],n.subscript=[8,"Subscript","a","subscript"],n.superscript=[9,"Superscript","a","superscript"],n.orderedlist=[10,"Insert Ordered List","a","insertorderedlist"],n.unorderedlist=[11,"Insert Unordered List","a","insertunorderedlist"],n.outdent=[12,"Outdent","a","outdent"],n.indent=[13,"Indent","a","indent"],n.leftalign=[14,"Left Align","a","justifyleft"],n.centeralign=[15,"Center Align","a","justifycenter"],n.rightalign=[16,"Right Align","a","justifyright"],n.blockjustify=[17,"Block Justify","a","justifyfull"],n.undo=[18,"Undo","a","undo"],n.redo=[19,"Redo","a","redo"],n.image=[20,"Insert Image","i","insertimage","Enter Image URL:","http://"],n.hr=[21,"Insert Horizontal Rule","a","inserthorizontalrule"],n.link=[22,"Insert Hyperlink","i","createlink","Enter URL:","http://"],n.unlink=[23,"Remove Hyperlink","a","unlink"],n.unformat=[24,"Remove Formatting","a","removeformat"],t.createEditor=function(r,a){t.ie=e(),this.editorName=r,this.xhtml=a.xhtml,t.editorDiv=t.frameDocument.createElement("div"),t.editorIframeContainer=t.frameDocument.createElement("div");var o=t.frameDocument.createElement("div"),d=a.controls.length,m=0;for(t.iframe=t.frameDocument.createElement("iframe"),t.iframe.frameBorder=0,t.iframe.width=a.width||"500",t.iframe.height=a.height||"250",o.className="teheader badd-avoid-dd",t.editorDiv.className="te badd-avoid-dd",t.editorDiv.style.maxWidth=t.iframe.width+"px",t.editorDiv.appendChild(o),m;d>m;m++){var c=a.controls[m];if("n"===c)o=t.frameDocument.createElement("div"),o.className="teheader badd-avoid-dd",t.editorDiv.appendChild(o);else if("|"==c){var s=t.frameDocument.createElement("div");s.className="tedivider badd-avoid-dd",o.appendChild(s)}else if("font"==c){var l=t.frameDocument.createElement("select"),u=["Verdana","Arial","Georgia"];l.className="tefont badd-avoid-dd",l.onchange=new Function(t.ddaction(this,"fontname")),l.options[0]=new Option("Font",""),u.forEach(function(e,t){l.options[t+1]=new Option(e,e)}),o.appendChild(l)}else if("size"==c){var f=t.frameDocument.createElement("select"),h=[1,2,3,4,5,6,7];f.className="tesize badd-avoid-dd",f.onchange=t.ddaction(f,"fontsize"),h.forEach(function(e,t){f.options[t]=new Option(e,e)}),o.appendChild(f)}else if("style"==c){var p=t.frameDocument.createElement("select"),v=[["Style",""],["Paragraph","<p>"],["Header 1","<h1>"],["Header 2","<h2>"],["Header 3","<h3>"],["Header 4","<h4>"],["Header 5","<h5>"],["Header 6","<h6>"]];p.className="testyle badd-avoid-dd",p.onchange=t.ddaction(p,"formatblock"),v.forEach(function(e,t){p.options[t]=new Option(e[0],e[1])}),o.appendChild(p)}else if(n[c]){var D,g=t.frameDocument.createElement("div"),y=n[c],b=y[2],E=y[0]*i;g.className="tecontrol badd-avoid-dd",g.style.backgroundPosition="0px "+E+"px",g.title=y[1],D="a"===b?t.action(y[3],0,y[4]||0):'.insert("'+y[4]+'", "'+y[5]+'", "'+y[3]+'")',g.onclick=D,o.appendChild(g),t.ie&&(g.unselectable="on")}}t.textArea.parentNode.insertBefore(t.editorDiv,t.textArea),t.textArea.style.width=t.iframe.width+"px",t.editorIframeContainer.appendChild(t.textArea),t.editorIframeContainer.appendChild(t.iframe),t.editorDiv.appendChild(t.editorIframeContainer),t.textArea.style.display="none",t.inlineFrameDocument=t.iframe.contentWindow.document,t.inlineFrameDocument.open();var C='<html><head><link rel="stylesheet" href="tinyeditor.min.css" />';if(C+='</head><body id="badd-inline-tinyeditor">'+t.textArea.value,C+="</body></html>",t.inlineFrameDocument.write(C),t.inlineFrameDocument.close(),t.inlineFrameDocument.designMode="on",this.xhtml)try{t.inlineFrameDocument.execCommand("styleWithCSS",0,0)}catch(w){try{t.inlineFrameDocument.execCommand("useCSS",0,1)}catch(w){}}},t.action=function(e,n,i){return!i||t.ie?function(){t.inlineFrameDocument.execCommand(e,0,n||null)}:void alert("Your browser does not support this function.")},t.print=function(){t.iframe.contentWindow.print()},t.ddaction=function(e,n){return function(){var i=e.selectedIndex,r=e.options[i].value;t.action(n,r)()}},t.insert=function(e,n,i){var r=prompt(e,n);null!=r&&""!=r&&t.inlineFrameDocument.execCommand(i,0,r)},t.setfont=function(){execCommand("formatblock",0,hType)},t.resize=function(e){this.mv&&this.freeze(),t.iframe.bcs=t.cursorTop(e),this.mv=new Function("event",this.editorName+".move(event)"),this.sr=new Function(this.editorName+".freeze()"),this.ie?(t.frameDocument.attachEvent("onmousemove",this.mv),t.frameDocument.attachEvent("onmouseup",this.sr)):(t.frameDocument.addEventListener("mousemove",this.mv,1),t.frameDocument.addEventListener("mouseup",this.sr,1))},t.move=function(e){var n=t.cursorTop(e);t.iframe.height=parseInt(t.iframe.height)+n-t.iframe.bcs,t.iframe.bcs=n},t.freeze=function(){this.ie?(t.frameDocument.detachEvent("onmousemove",this.mv),t.frameDocument.detachEvent("onmouseup",this.sr)):(t.frameDocument.removeEventListener("mousemove",this.mv,1),t.frameDocument.removeEventListener("mouseup",this.sr,1))},t.cursorTop=function(n){return e()?t.window.event.clientY+t.frameDocument.documentElement.scrollTop+t.frameDocument.body.scrollTop:n.clientY+t.window.scrollY}};angular.module("baddEditor").service("tinyEditorService",e)}();