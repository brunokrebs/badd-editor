!function(){var e=angular.module("baddEditor",[]),t=function(e,t){e.title=angular.isDefined(e.title)?e.title:"Bootstrap visual editor",e.componentsTitle=angular.isDefined(e.componentsTitle)?e.componentsTitle:"Components",e.propertiesTitle=angular.isDefined(e.propertiesTitle)?e.propertiesTitle:"Properties",t.addEventListener("message",function(){alert("received something")}),e.components=[{title:"Header 1",label:"h1",element:"<h1>New Header 1</h1>"},{title:"Header 2",label:"h2",element:"<h2>New Header 2</h2>"},{title:"Header 3",label:"h3",element:"<h3>New Header 3</h3>"},{title:"Header 4",label:"h4",element:"<h4>New Header 4</h4>"},{title:"Button",label:"btn",element:'<button class="btn btn-primary" badd-draggable>New Button</button>'}]};t.$inject=["$scope","$window"];var n=function(){return{restrict:"E",templateUrl:"badd-editor.html",scope:{title:"@",componentsTitle:"@",propertiesTitle:"@",template:"@"},controller:t}};e.directive("baddEditor",n);var i=function(){var e=this;e.uniqueCounter=0,e.getNextUniqueClass=function(){return e.uniqueCounter=e.uniqueCounter+1,"badd-editor-unique-"+e.uniqueCounter},e.getLastUniqueClass=function(){return"badd-editor-unique-"+e.uniqueCounter}};e.service("editorService",i)}();
!function(){var e=angular.module("baddEditor"),a=function(){return{restrict:"A",link:function(e,a){var r=$("iframe.badd-editor-browser").offset();r.left=r.left+62,r.top=r.top+22,a.draggable({revert:!1,helper:"clone",iframeFix:!0,cursorAt:r,drag:function(){$(this).addClass("drag-active"),$(this).closest(a).addClass("drag-active")},stop:function(e,r){$(this).removeClass("drag-active").closest(a).removeClass("drag-active")}})}}};e.directive("baddDraggable",a)}();
!function(){var e=angular.module("baddEditor"),t=function(e){return{restrict:"E",scope:{template:"@"},replace:!0,template:'<iframe class="badd-editor-browser"></iframe>',link:function(t,a,r){"IFRAME"===a.prop("tagName")&&(a.attr("src",r.template),a.load(function(){var r=a.contents().find("html");r.attr("ng-app","baddEditor");var d=r.find("head");d.append('<link rel="stylesheet" href="badd-editor-frame.min.css" type="text/css" />');var n=r.find("body");n.attr("badd-droppable",""),n.attr("ng-controller","editablePageController as ctrl");var l=n.find("div");l.attr("badd-droppable",""),l.attr("ng-click","ctrl.sendMessage()"),e(r)(t)}))}}};t.$inject=["$compile"],e.directive("baddDroppableFrame",t);var a=function(e){var t=this;t.message="Hello darling",t.sendMessage=function(){e.postMessage(t.message,"*")}};a.$inject=["$window"],e.controller("editablePageController",a)}();
!function(){var e=angular.module("baddEditor"),t=function(e,t){function r(e){e.each(function(){return $(this).hasClass(n.entered)?void i($(this)):void 0})}function i(e){e.removeClass(n.entered),n.entered=null;var t=e.parents("body");t.find(".badd-highlighter").remove(),n.objectPreview&&n.objectPreview.remove()}var n=this;return n.entered=null,n.objectEntering=function(e,i){if(r($(this).parents()),!n.entered){n.entered=t.getNextUniqueClass(),$(this).addClass(n.entered),n.objectPreview=$(i.draggable.data("raw")),$(this).append(n.objectPreview);var a=$(this).offset(),o=$(this).outerWidth(),d=$(this).outerHeight(),s=$(this).parents("body");s.append('<div class="badd-highlighter" style="position: fixed; top: '+a.top+"px ; left: "+a.left+"px ; width: "+o+"px; height: "+d+'px; border: 2px dashed lightskyblue;" />')}},n.objectLeaving=function(){n.entered&&$(this).hasClass(n.entered)&&i($(this))},n.objectDropped=function(t){return function(r,a){var o=angular.element(a.draggable).data("raw"),d=angular.element(a.draggable),s=angular.element(this);i(s),void 0==o&&(o=$(d)[0].outerHTML),e(o)(t).appendTo(s),n.objectLeaving(r)}},{restrict:"A",link:function(e,t){t.droppable({activeClass:"drop-active",greedy:!0,hoverClass:"drop-hover",iframeFix:!0,tolerance:"intersect",over:n.objectEntering,out:n.objectLeaving,drop:n.objectDropped(e)})}}};t.$inject=["$compile","editorService"],e.directive("baddDroppable",t)}();
angular.module("baddEditor").run(["$templateCache", function($templateCache) {$templateCache.put("badd-editor.html","<table class=\"badd-editor\">\n	<tr>\n		<td class=\"badd-editor-header\" colspan=\"3\">\n			<div class=\"col-xs-12\">\n				<p class=\"badd-editor-title\">{{title}}</p>\n			</div>\n		</td>\n	</tr>\n	<tr>\n		<td class=\"badd-editor-components\">\n			<div class=\"badd-editor-components\">\n				<p class=\"badd-editor-title\">{{componentsTitle}}</p>\n				<ul>\n					<li ng-repeat=\"component in components\" data-raw=\"{{component.element}}\" badd-draggable>\n						<span class=\"label label-default badd-editor-label\">{{component.label}}</span> <span class=\"badd-editor-title\">{{component.title}}</span><i class=\"fa fa-arrows-alt\"></i>\n					</li>\n				</ul>\n			</div>\n		</td>\n		<td class=\"badd-editor-browser\">\n			<badd-droppable-frame template=\"{{template}}\"></badd-droppable-frame>\n		</td>\n		<td class=\"badd-editor-properties\">\n			<div class=\"badd-editor-properties\">\n				<p class=\"badd-editor-title\">{{propertiesTitle}}</p>\n				hi\n			</div>\n		</td>\n	</tr>\n</table>");}]);