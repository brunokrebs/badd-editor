!function(){var e=angular.module("baddEditor",[]),t=function(e,t){e.pageTitleChanged=function(){t.changePageTitle(e.pageTitle)},e.componentsTitle=angular.isDefined(e.componentsTitle)?e.componentsTitle:"Components",e.draggables=[{title:"Container",icon:"fa-square-o",element:'<div class="container"><div class="row"><div class="col-xs-12"><p>A simple row with a single column</p></div></div></div>'},{title:"Row",icon:"fa-align-justify",element:'<div class="row"><div class="col-xs-12"><p>A simple row with a single column</p></div></div>'},{title:"Column",icon:"fa-columns",element:'<div class="col-xs-12"><p>You can make me a smaller column</p></div>'},{title:"Header 1",icon:"fa-header",element:"<h1>An important title</h1>"},{title:"Paragraph",icon:"fa-align-left",element:"<p>Write something useful here</p>"},{title:"Button",icon:"fa-plus-square",element:'<button class="btn btn-primary">My brand new button</button>'},{title:"Image",icon:"fa-picture-o",element:'<img src="http://www.avjobs.com/images/v_png_v5/v_collection_png/256x256/shadow/airplane2.png"alt="airplane">'}],e.buttons=[{label:"Arial",tooltip:"Font",icon:"caret"},{label:"11",tooltip:"Font size",icon:"fa fa-caret-down",separate:"btn-separate"},{label:"",tooltip:"Bold",icon:"fa fa-bold",command:"bold"},{label:"",tooltip:"Italic",icon:"fa fa-italic",command:"italic"},{label:"",tooltip:"Underline",icon:"fa fa-underline",command:"underline",separate:"btn-separate"},{label:"F",tooltip:"",icon:"Font color"},{label:"",tooltip:"Background color",icon:"fa fa-square",separate:"btn-separate"},{label:"",tooltip:"Align left",icon:"fa fa-align-left",command:"justifyLeft"},{label:"",tooltip:"Align center",icon:"fa fa-align-center",command:"justifyCenter"},{label:"",tooltip:"Align right",icon:"fa fa-align-right",command:"justifyRight"},{label:"",tooltip:"Justify",icon:"fa fa-align-justify",command:"justifyFull",separate:"btn-separate"},{label:"",tooltip:"Ordered list",icon:"fa fa-list-ol",command:"insertOrderedList"},{label:"",tooltip:"Unordered list",icon:"fa fa-list-ul",command:"insertUnorderedList"}],e.execute=function(e){t.executeCommand(e)}};t.$inject=["$scope","editorService"];var i=function(e){return{restrict:"E",templateUrl:"badd-editor.html",scope:{title:"@",componentsTitle:"@",template:"@"},controller:t,link:function(t,i,n){var a=i.find("iframe");a.attr("src",n.template),a.on("load",e.initializeFrame(a,t))}}};i.$inject=["editorService"],e.directive("baddEditor",i);var n=function(e,t,i,n,a,l){function o(e,t){var i=e.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("href",t),i.setAttribute("type","text/css"),e.querySelector("head").appendChild(i)}var c=this;c.initializeFrame=function(r,d){return function(){c.document=a[0],c.iframe=r[0],t.setup(l,d),i.setup(l,d),n.setup(l,d),e.setup(l,d),c.iframeDocument=c.iframe.contentDocument,o(c.iframeDocument,"badd-editor-frame.min.css"),c.pageTitle=c.iframeDocument.querySelector("title"),c.pageTitle?d.$apply(function(){d.pageTitle=c.pageTitle.textContent}):c.pageTitle=c.document.createElement("title")}},c.changePageTitle=function(e){c.pageTitle.textContent=e},c.executeCommand=function(e){n.executeCommand(e)}};n.$inject=["baddDragDropService","baddElementHighlighter","baddElementSelector","baddContentEditor","$document","$window"],e.service("editorService",n),e.constant("BADD_EVENTS",{ELEMENT_HOVERED:"badd-element–hovered",ELEMENT_SELECTED:"badd-element–selected",ELEMENT_DESELECTED:"badd-element–deselected",ELEMENT_BEING_EDITED:"badd-element–being-edited"})}();
!function(){var e=angular.module("baddEditor"),t=function(e,n){function o(t){if(t.stopPropagation(),t.target!==s&&!e.belongsTo(t.target,s)&&(t.preventDefault(),e.contains(S,t.target.tagName)&&!e.belongsTo(t.target,s))){s=t.target,f=t.target,s.setAttribute("draggable","false");for(var o=s.parentNode;"BODY"!=o.tagName;)(o.getAttribute("badd-draggable")||o.getAttribute("draggable"))&&o.setAttribute("draggable","false"),o=o.parentNode;d.$emit(n.ELEMENT_BEING_EDITED,s),s.contentEditable=!0;var a=u.contentWindow.getSelection();u.contentWindow.focus(),a.collapse(s,0),s.focus()}}function a(){r()||(E.designMode="on",E.execCommand("StyleWithCSS",!1,!0))}function i(){r()||(E.designMode="off")}function r(){return null==m&&(m=!l.ActiveXObject&&"ActiveXObject"in l),m}var d,l,c,u,g,E,b,f,s,m,v=this,S=["H1","H2","H3","H4","H5","H6","H7","P","UL","OL","BUTTON"];v.setup=function(e,t){null==l&&(d=t,l=e,c=l.document,u=c.querySelector("iframe.badd-editor-browser"),g=u.contentWindow,E=g.document,b=E.querySelector("body"),g.addEventListener("dblclick",o),d.$on(n.ELEMENT_SELECTED,function(e){s&&(s.removeAttribute("contentEditable"),s=null),f=e}),d.$on(n.ELEMENT_DESELECTED,function(){s&&(s.removeAttribute("contentEditable"),s=null),f=null}))},t.executeCommand=function(e){if(null!=f||null!=s){if(a(),null==s){var t=E.defaultView.getSelection(),n=E.createRange();n.setStart(f,0),n.setEnd(f,0),t.removeAllRanges(),t.addRange(n)}E.execCommand(e,!1),i()}}};t.$inject=["baddUtils","BADD_EVENTS"],e.service("baddContentEditor",t)}();
!function(){var e=angular.module("baddEditor"),t=function(e,t){function n(t,n){g.$emit(e.ELEMENT_HOVERED,{target:t,dragging:n})}function a(e){e.preventDefault();var t=e.target;if(null!=t.getAttribute("badd-draggble-label"))for(;null==t.getAttribute("badd-draggable");)t=t.parentNode;null!=t.getAttribute("badd-draggable")&&(L.innerHTML=t.getAttribute("data-element"),T=L.childNodes[0],T.style.pointerEvents="none",l(e,T.tagName))}function r(e){3!=e.which&&(e.preventDefault(),t.contains(M,e.target.tagName)&&(l(e),L.appendChild(e.target.cloneNode(!0)),T=L.childNodes[0],T.style.pointerEvents="none",A=e.target))}function o(e){var t="fa fa-question";return S.forEach(function(n){n.tagName===e&&(t=n.icon)}),t}function i(e){if(e.preventDefault(),T){D.innerHTML="",x=null,A&&e.target!=y&&(A.style.removeProperty("pointer-events"),A=null);for(var n=e.target;n&&!t.contains(I,n.tagName);)n=n.parentNode;s(n)}}function l(e,t){if(e.target.ownerDocument==v&&(n(),T&&T.parentNode&&T.ownerDocument==y?T.parentNode.removeChild(T):A&&(A.parentNode.removeChild(A),A=null)),x||t){t&&!x&&(D.innerHTML='<i class="'+o(t)+'"></i>',x=D.childNodes[0],x.style.display="block",x.style.position="fixed",x.style.fontSize="30px",x.style.backgroundColor="#2385DC",x.style.border="1px solid #999",x.style.color="#fff",x.style.padding="10px",x.style.zIndex=16777220);var a=0,r=0;e.target.ownerDocument==y&&(a=C,r=H),(e.clientX<0||e.clientY<0)&&(a=C,r=H),x.style.left=e.clientX+a+"px",x.style.top=e.clientY-55+r+"px"}}function d(){A&&A.style.removeProperty("pointer-events"),D.innerHTML="",x=null,T&&s(w)}function u(e){if(e.target==y)return A?(A.parentNode.removeChild(A),A=null):T&&T.parentNode&&T.parentNode.removeChild(T),void l(e);if(null==T)n(e.target,!1);else{if(A&&"none"!=A.style.pointerEvents)return void(A.style.pointerEvents="none");n(null,!0),l(e,T.tagName),f(e)}}function f(e){for(var a=e.target;!t.contains(I,a.tagName);)a=a.parentNode;if(A){var r=c(e,a);if(a==A.parentNode&&(r==A.nextElementSibling||r==A))return;A.parentNode.removeChild(A),A=null}if(0==p(a))return void(w&&a!==T&&T.parentNode===w&&w.removeChild(T));w=a,n(a,!0);var o=c(e,a);o?a.insertBefore(T,o):a.appendChild(T)}function c(e,n){var a=t.toArray(n.childNodes),r=null,o=null;return a.forEach(function(t){if(t.getBoundingClientRect&&t!=T){var n=t.getBoundingClientRect(),a={X:n.width/2+n.left,Y:n.height/2+n.top},i=a.Y;i-n.top>30&&(i=n.top+30);var l=a.X;l-n.left>30&&(l=n.left+30),e.clientY>i&&e.clientX>l||e.clientY>n.bottom||(null==r?(r=t,o=n):o.left>=n.left&&o.top>=n.top&&(r=t,o=n))}}),r}function s(e){w&&0==p(e)&&e!==T&&T.parentNode===w&&w.removeChild(T),null==e&&(A&&(A.parentNode.removeChild(A),A=null),T&&T.parentNode&&T.parentNode.removeChild(T)),L.innerHTML="",T.style.removeProperty("pointer-events"),T=null,w=null}function p(e){return e&&e.getAttribute&&T&&e!==T&&t.contains(I,e.tagName)?void 0:!1}var g,m,v,N,h,b,y,E,C,H,D,L,T,w,A,x,B=this,I=["DIV","BODY","P"],M=["DIV","IMG","P","BUTTON","A","H1","H2","H3","H4","H5","H6"],S=[{tagName:"DIV",icon:"fa fa-square-o"},{tagName:"IMG",icon:"fa fa-picture-o"},{tagName:"P",icon:"fa fa-align-left"},{tagName:"BUTTON",icon:"fa fa-plus-square"},{tagName:"A",icon:"fa fa-link"},{tagName:"H1",icon:"fa fa-header"},{tagName:"H2",icon:"fa fa-header"},{tagName:"H3",icon:"fa fa-header"},{tagName:"H4",icon:"fa fa-header"},{tagName:"H5",icon:"fa fa-header"},{tagName:"H6",icon:"fa fa-header"}];B.setup=function(e,t){if(null==m){g=t,m=e,v=m.document,N=v.querySelector("body"),h=v.querySelector("iframe.badd-editor-browser"),b=h.contentWindow,y=b.document,E=y.querySelector("body");var n=h.getBoundingClientRect(),o=e.getComputedStyle(h);C=n.left+parseInt(o["padding-left"]),H=n.top+parseInt(o["padding-top"]),m.addEventListener("mousedown",a),m.addEventListener("mouseup",i),m.addEventListener("mousemove",l),m.addEventListener("blur",d),b.addEventListener("mousedown",r),b.addEventListener("mouseup",i),b.addEventListener("mousemove",u),D=v.createElement("svg"),D.className="badd-draggable-conteiner",N.appendChild(D),L=v.createElement("div"),L.className="badd-transfer-area",N.appendChild(L)}}};t.$inject=["BADD_EVENTS","baddUtils"],e.service("baddDragDropService",t)}();
!function(){var e=angular.module("baddEditor"),t=function(e){function t(e){var t=e.getBoundingClientRect();E.style.top=t.top-3+"px",E.style.left=t.left-3+"px",E.style.width=e.offsetWidth+6+"px",E.style.height=e.offsetHeight+6+"px",E.style.display="block",u=e}function n(){E.style.display="none",E.style.top=0,E.style.left=0,E.style.width=0,E.style.height=0}function i(){"block"===E.style.display&&u&&t(u)}var l,o,d,s,r,a,c,E,u,y=this;y.setup=function(u,y){null==o&&(l=y,o=u,d=o.document,s=d.querySelector("iframe.badd-editor-browser"),r=s.contentWindow,a=r.document,c=a.querySelector("body"),E=a.createElement("svg"),E.className="badd-highlighter",c.appendChild(E),r.addEventListener("resize",i),a.addEventListener("scroll",i),l.$on(e.ELEMENT_HOVERED,function(e,i){return i.target?void t(i.target):n()}),l.$on(e.ELEMENT_BEING_EDITED,n))}};t.$inject=["BADD_EVENTS"],e.service("baddElementHighlighter",t)}();
!function(){var t=angular.module("baddEditor"),e=function(t,e){function d(t){f=t;var e=t.getBoundingClientRect();E.style.top=e.top-3+"px",E.style.left=e.left-3+"px",E.style.width=t.offsetWidth+6+"px",E.style.height=t.offsetHeight+6+"px",E.style.display="block"}function i(){f=null,E.style.display="none",E.style.top=0,E.style.left=0,E.style.width=0,E.style.height=0}function n(){f&&d(f)}function a(n){if((!b||!e.belongsTo(n.target,b)&&b!=n.target)&&(n.preventDefault(),n.target!=c)){if(n.target===f&&null==b)return i(),n.stopPropagation(),void l.$emit(t.ELEMENT_DESELECTED);if(n.stopPropagation(),b&&b!==n.target){for(var a=b.parentNode;"BODY"!=a.tagName;)(a.getAttribute("badd-draggable")||a.getAttribute("draggable"))&&a.setAttribute("draggable","true"),a=a.parentNode;E.setAttribute("class","badd-selected-highlighter badd-avoid-dd"),b.removeAttribute("contentEditable"),b=null}d(n.target)}}var l,r,o,s,g,c,u,E,b,f,p=this;p.setup=function(e,d){null==r&&(l=d,r=e,o=r.document,s=o.querySelector("iframe.badd-editor-browser"),g=s.contentWindow,c=g.document,u=c.querySelector("body"),E=c.createElement("svg"),E.className="badd-selected-highlighter badd-avoid-dd",u.appendChild(E),e.addEventListener("click",i),g.addEventListener("click",a),g.addEventListener("resize",n),c.addEventListener("scroll",n),c.addEventListener("keyup",n),l.$on(t.ELEMENT_HOVERED,function(t,e){e.dragging&&i()}),l.$on(t.ELEMENT_BEING_EDITED,function(t,e){E.setAttribute("class","badd-selected-highlighter badd-avoid-dd badd-edition-mode"),b=e}))}};e.$inject=["BADD_EVENTS","baddUtils"],t.service("baddElementSelector",e)}();
angular.module("baddEditor").run(["$templateCache", function($templateCache) {$templateCache.put("badd-editor.html","<div class=\"badd-editor-browser-frame\">\n	<div class=\"badd-editor-browser-header\">\n		<div class=\"badd-editor-browser-header-close\"></div>\n		<div class=\"badd-editor-browser-header-min\"></div>\n		<div class=\"badd-editor-browser-header-max\"></div>\n	</div>\n	<div class=\"badd-editor-browser-address\">\n		<div class=\"badd-editor-browser-address-undo-redo\">\n			<div class=\"badd-editor-browser-address-return\">\n				<i class=\"fa fa-arrow-left\"></i>\n			</div>\n			<div class=\"badd-editor-browser-address-redo\">\n				<i class=\"fa fa-arrow-right\"></i>\n			</div>\n		</div>\n		<div class=\"badd-editor-browser-address-page-title\">\n			<input type=\"text\" class=\"form-control\" placeholder=\"Page title\"\n				   ng-model=\"pageTitle\" ng-change=\"pageTitleChanged()\">\n		</div>\n	</div>\n	<div class=\"badd-editor-dragglable-components\">\n		<p class=\"badd-editor-title\">{{componentsTitle}}</p>\n		<ul>\n			<li ng-repeat=\"draggable in draggables\" data-element=\"{{draggable.element}}\" badd-draggable>\n				<i class=\"fa {{draggable.icon}}\" badd-draggble-label></i>\n				<span class=\"badd-editor-title\" badd-draggble-label>{{draggable.title}}</span>\n			</li>\n		</ul>\n	</div>\n	<div class=\"badd-editor-browser-configuration\">\n		<button ng-repeat=\"button in buttons\" type=\"button\" title=\"{{button.tooltip}}\"\n				class=\"btn btn-default\" ng-class=\"button.separate\"\n				ng-click=\"execute(button.command)\">\n			{{button.label}} <i class=\"{{button.icon}}\"></i>\n		</button>\n	</div>\n	<iframe class=\"badd-editor-browser\"></iframe>\n	<div class=\"badd-editor-browser-footer\"></div>\n</div>");}]);
!function(){var r=angular.module("baddEditor"),n=function(){var r=this;r.belongsTo=function(r,n){if(null==r||null==n||r===n)return!1;for(var t=r.parentNode;null!=t;){if(t===n)return!0;t=t.parentNode}return!1},r.contains=function(r,n){for(var t=r?r.length:0,e=-1,o=n===n;++e<t;){var u=r[e];if(o?u===n:u!==u)return!0}return!1},r.toArray=function(r){for(var n=[],t=r?r.length:0,e=0;t>e;e++)n[e]=r[e];return n}};r.service("baddUtils",n)}();