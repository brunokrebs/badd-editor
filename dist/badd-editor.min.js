!function(){var e=angular.module("baddEditor",[]),t=function(e){e.componentsTitle=angular.isDefined(e.componentsTitle)?e.componentsTitle:"Components",e.draggables=[{title:"Container",icon:"fa-square-o",element:'<div class="container"><div class="row"><div class="col-xs-12"><p>A simple row with a single column</p></div></div></div>'},{title:"Row",icon:"fa-align-justify",element:'<div class="row"><div class="col-xs-12"><p>A simple row with a single column</p></div></div>'},{title:"Column",icon:"fa-columns",element:'<div class="col-xs-12"><p>You can make me a smaller column</p></div>'},{title:"Header 1",icon:"fa-header",element:"<h1>An important title</h1>"},{title:"Paragraph",icon:"fa-align-left",element:"<p>Write something useful here</p>"},{title:"Button",icon:"fa-plus-square",element:'<btn class="btn btn-primary">My brand new button</btn>'},{title:"Image",icon:"fa-picture-o",element:'<img src="http://www.avjobs.com/images/v_png_v5/v_collection_png/256x256/shadow/airplane2.png"alt="airplane">'}]};t.$inject=["$scope"];var i=function(){return{restrict:"E",templateUrl:"badd-editor.html",scope:{title:"@",componentsTitle:"@",template:"@"},controller:t}};e.directive("baddEditor",i);var n=function(e,t,i,n){function r(e){if("badd-highlight"!==e.className&&"badd-transfer-area"!==e.className&&"badd-editor-content-edition"!==e.className){"DIV"===e.tagName&&""!==e.getAttribute("badd-droppable")&&e.setAttribute("badd-droppable",""),""!==e.getAttribute("badd-draggable")&&(e.setAttribute("badd-draggable",""),e.setAttribute("badd-configurable",""));var t=_.toArray(e.querySelectorAll("*"));t.forEach(r)}}function o(){var e=d.document.querySelector("td.badd-editor-components"),t=d.document.querySelector("div.badd-editor-browser-frame");t.style.height=e.getBoundingClientRect().height-1+"px",d.iframe.style.height=e.getBoundingClientRect().height-140+"px";var i=d.document.querySelector("div.badd-editor-browser-address"),n=i.querySelector("div.badd-editor-browser-address-page-title");n.style.width=i.getBoundingClientRect().width-75+"px"}function l(e){e.stopPropagation(),e.preventDefault(),d.hideSelectedHighlightBorder()}var d=this;d.initializeFrame=function(a,s){return function(){d.document=t[0],d.iframe=a[0],o(),i.addEventListener("click",l),d.iframePosition=d.iframe.getBoundingClientRect(),d.frame=a.contents()[0],d.frame.addEventListener("scroll",d.updateHighlightBorderPosition),d.frameHtml=d.frame.querySelector("html"),d.frameHead=d.frame.querySelector("head"),d.frameBody=d.frame.querySelector("body"),n.frameWindow=d.frame.defaultView,n.frameDocument=d.frame,n.textArea=d.frameBody.querySelector("#somethingnice"),new n.TINY.editor.edit("somethingnice",{id:"something-nice",width:584,height:175,cssclass:"te",controlclass:"tecontrol",rowclass:"teheader",dividerclass:"tedivider",controls:["bold","italic","underline","strikethrough","|","subscript","superscript","|","orderedlist","unorderedlist","|","outdent","indent","|","leftalign","centeralign","rightalign","blockjustify","|","unformat","|","undo","redo","n","font","size","style","|","image","hr","link","unlink","|","cut","copy","paste","print"],footer:!0,fonts:["Verdana","Arial","Georgia","Trebuchet MS"],xhtml:!0,bodyid:"editor",footerclass:"tefooter",toggle:{text:"show source",activetext:"show wysiwyg",cssclass:"toggle"},resize:{cssclass:"resize"}}),d.pageTitle=d.frame.querySelector("title"),d.pageTitle?s.$apply(function(){s.pageTitle=d.pageTitle.textContent}):d.pageTitle=d.document.createElement("title"),d.transferArea=d.document.createElement("div"),d.transferArea.className="badd-transfer-area",d.frameBody.appendChild(d.transferArea),d.transferArea.innerHTML='<svg class="badd-highlighter"></svg>',d.highlightBorder=d.transferArea.childNodes[0],d.frameBody.appendChild(d.highlightBorder),d.transferArea.innerHTML='<svg class="badd-selected-highlighter"></svg>',d.selectedHighlightBorder=d.transferArea.childNodes[0],d.frameBody.appendChild(d.selectedHighlightBorder),d.frameHtml.setAttribute("ng-app","baddEditor"),d.stylesheet=d.document.createElement("link"),d.stylesheet.setAttribute("rel","stylesheet"),d.stylesheet.setAttribute("href","badd-editor-frame.min.css"),d.stylesheet.setAttribute("type","text/css"),d.frameHead.appendChild(d.stylesheet),d.frameBody.setAttribute("badd-droppable",""),d.frameBody.setAttribute("badd-configurable",""),d.transferArea.innerHTML='<textarea resizable="false" class="badd-editor-content-edition"></textarea>',d.contentEdition=d.transferArea.childNodes[0],d.contentEdition.addEventListener("blur",d.hideContentEditionArea),d.frameBody.appendChild(d.contentEdition);var g=_.toArray(d.frameBody.querySelectorAll("*"));g.forEach(r),d.scope=s,e(d.frameHtml)(s)}},d.changePageTitle=function(e){d.pageTitle.textContent=e},d.startDragging=function(e){e.dataTransfer.setData("text","firefox needs data"),""===e.target.getAttribute("badd-configurable")?(d.previewElement=e.target,d.hideSelectedHighlightBorder()):(d.transferArea.innerHTML=e.target.getAttribute("data-element"),d.previewElement=d.transferArea.querySelector("*"))},d.stopDragging=function(e){d.transferArea.innerHTML="",d.previewElement&&d.previewElement.parentNode&&(d.previewElement.parentNode.removeChild(d.previewElement),d.previewElement=null),d.hideHighlightBorder()},d.elementEntering=function(e){d.previewElement.classList.remove("badd-hidden-preview-element"),e.stopPropagation(),e.preventDefault()},d.elementLeaving=function(e){var t=d.document.elementFromPoint(e.clientX+d.iframePosition.left,e.clientY+d.iframePosition.top);null!=t&&"IFRAME"===t.tagName&&_.contains(t.classList,"badd-editor-browser")||(d.previewElement.classList.add("badd-hidden-preview-element"),d.hideHighlightBorder())},d.elementHovering=function(e){if(e.stopPropagation(),e.preventDefault(),e.target.getAttribute&&e.target!==d.previewElement&&""===e.target.getAttribute("badd-droppable")){var t=_.toArray(e.target.childNodes),i=null,n=null;t.forEach(function(t){if(t.getBoundingClientRect&&"badd-transfer-area"!=t.className&&"badd-highlighter"!=t.className&&"badd-editor-content-edition"!=t.className&&t!=d.previewElement){var r=t.getBoundingClientRect(),o={X:r.width/2+r.left,Y:r.height/2+r.top},l=o.Y;l-r.top>30&&(l=r.top+30);var a=o.X;a-r.left>30&&(a=r.left+30),e.clientY>l&&e.clientX>a||e.clientY>r.bottom||(null==i?(i=t,n=r):n.left>=r.left&&n.top>=r.top&&(i=t,n=r))}}),i?e.target.insertBefore(d.previewElement,i):e.target.appendChild(d.previewElement),d.showHighlightBorder(e.target)}},d.elementDropped=function(t){t.stopPropagation(),t.preventDefault(),r(d.previewElement),e(d.previewElement)(d.scope),d.previewElement=null},d.updateHighlightBorderPosition=function(){"block"===d.highlightBorder.style.display&&d.lastHoveredTarget&&d.showHighlightBorder(d.lastHoveredTarget)},d.showHighlightBorder=function(e){var t=e.getBoundingClientRect();d.highlightBorder.style.top=t.top+"px",d.highlightBorder.style.left=t.left+"px",d.highlightBorder.style.width=e.offsetWidth+"px",d.highlightBorder.style.height=e.offsetHeight+"px",d.highlightBorder.style.display="block",d.lastHoveredTarget=e},d.showSelectedHighlightBorder=function(e){var t=e.getBoundingClientRect();d.selectedHighlightBorder.style.top=t.top+"px",d.selectedHighlightBorder.style.left=t.left+"px",d.selectedHighlightBorder.style.width=e.offsetWidth+"px",d.selectedHighlightBorder.style.height=e.offsetHeight+"px",d.selectedHighlightBorder.style.display="block"},d.hideSelectedHighlightBorder=function(){d.selectedHighlightBorder.style.display="none",d.selectedHighlightBorder.style.top=0,d.selectedHighlightBorder.style.left=0,d.selectedHighlightBorder.style.width=0,d.selectedHighlightBorder.style.height=0},d.hideHighlightBorder=function(){d.highlightBorder.style.display="none",d.highlightBorder.style.top=0,d.highlightBorder.style.left=0,d.highlightBorder.style.width=0,d.highlightBorder.style.height=0},d.mouseHovering=function(e){e.stopPropagation(),e.preventDefault(),"badd-transfer-area"!==e.target.className&&"badd-highlighter"!==e.target.className&&"badd-editor-content-edition"!==e.target.className&&d.showHighlightBorder(e.target)},d.mouseClick=function(e){e.stopPropagation(),e.preventDefault(),d.showSelectedHighlightBorder(e.target),"P"===e.target.tagName&&d.showContentEditionArea(e.target)},d.showContentEditionArea=function(e){var t=e.getBoundingClientRect();d.contentEdition.style.display="block",d.contentEdition.style.top=t.top+"px",d.contentEdition.style.left=t.left+"px",d.contentEdition.style.width=e.offsetWidth+"px",d.contentEdition.style.height=e.offsetHeight+"px";var n=i.getComputedStyle(e);d.contentEdition.style.color=n.color,d.contentEdition.style.fontSize=n.fontSize,d.contentEdition.style.fontFamily=n.fontFamily,d.contentEdition.style.padding=n.padding,d.contentEdition.style.margin=n.margin,d.contentEdition.style.lineHeight=n.lineHeight,d.contentEdition.value=e.innerHTML.replace(/<br>/g,"\n"),e.style.color="transparent",d.hideSelectedHighlightBorder(),d.elementBeingEdited=e,d.contentEdition.setSelectionRange(0,0)},d.hideContentEditionArea=function(){d.elementBeingEdited.style.color=d.contentEdition.style.fontSize,d.elementBeingEdited.style.color=d.contentEdition.style.fontFamily,d.elementBeingEdited.style.color=d.contentEdition.style.padding,d.elementBeingEdited.style.color=d.contentEdition.style.margin,d.elementBeingEdited.style.color=d.contentEdition.style.lineHeight,d.elementBeingEdited.innerHTML=d.contentEdition.value.replace(/\n/g,"<br>"),d.elementBeingEdited.style.color=d.contentEdition.style.color,d.contentEdition.style.display="none",d.contentEdition.style.top=0,d.contentEdition.style.left=0,d.contentEdition.style.width=0,d.contentEdition.style.height=0,d.elementBeingEdited=null},d.mouseLeaving=function(e){e.stopPropagation(),e.preventDefault(),d.hideHighlightBorder()}};n.$inject=["$compile","$document","$window","tinyEditorService"],e.service("editorService",n)}();
!function(){var e=angular.module("baddEditor"),i=function(e,i){return{restrict:"A",link:function(e,n){var r=n[0];r.addEventListener("mouseover",i.mouseHovering),r.addEventListener("click",i.mouseClick),r.addEventListener("mouseout",i.mouseLeaving)}}};i.$inject=["$compile","editorService"],e.directive("baddConfigurable",i)}();
!function(){var t=angular.module("baddEditor"),r=function(t){return{restrict:"A",link:function(r,e){var a=e[0];a.setAttribute("draggable","true"),a.addEventListener("dragstart",t.startDragging,!1),a.addEventListener("dragend",t.stopDragging,!1)}}};r.$inject=["editorService"],t.directive("baddDraggable",r)}();
!function(){var e=angular.module("baddEditor"),t=function(e,t){e.pageTitleChanged=function(){t.changePageTitle(e.pageTitle)}};t.$inject=["$scope","editorService"];var a=function(e,a){return{restrict:"E",scope:{template:"@"},replace:!0,templateUrl:"badd-droppable-frame.html",controller:t,link:function(e,t,i){var r=t.find("iframe");r.attr("src",i.template),r.on("load",a.initializeFrame(r,e))}}};a.$inject=["$compile","editorService"],e.directive("baddDroppableFrame",a)}();
!function(){var e=angular.module("baddEditor"),n=function(e,n){return{restrict:"A",link:function(e,r){var t=r[0];t.addEventListener("dragenter",n.elementEntering),t.addEventListener("dragleave",n.elementLeaving),t.addEventListener("dragover",n.elementHovering),t.addEventListener("drop",n.elementDropped)}}};n.$inject=["$compile","editorService"],e.directive("baddDroppable",n)}();
angular.module("baddEditor").run(["$templateCache", function($templateCache) {$templateCache.put("badd-droppable-frame.html","<div class=\"badd-editor-browser-frame\">\n	<div class=\"badd-editor-browser-header\">\n		<div class=\"badd-editor-browser-header-close\"></div>\n		<div class=\"badd-editor-browser-header-min\"></div>\n		<div class=\"badd-editor-browser-header-max\"></div>\n	</div>\n	<div class=\"badd-editor-browser-address\">\n		<div class=\"badd-editor-browser-address-undo-redo\">\n			<div class=\"badd-editor-browser-address-return\">\n				<i class=\"fa fa-arrow-left\"></i>\n			</div>\n			<div class=\"badd-editor-browser-address-redo\">\n				<i class=\"fa fa-arrow-right\"></i>\n			</div>\n		</div>\n		<div class=\"badd-editor-browser-address-page-title\">\n			<input type=\"text\" class=\"form-control\" placeholder=\"Page title\"\n				   ng-model=\"pageTitle\" ng-change=\"pageTitleChanged()\">\n		</div>\n	</div>\n	<div class=\"badd-editor-browser-configuration\">\n		<button type=\"button\" class=\"btn btn-default disabled\" title=\"Font\">\n			Arial <span class=\"caret\"></span>\n		</button>\n		<button type=\"button\" class=\"btn btn-default disabled\" title=\"Font size\">\n			11 <span class=\"fa fa-caret-up\"></span> <span class=\"fa fa-caret-down\"></span>\n		</button>\n		<div class=\"btn-separator\"></div>\n		<button type=\"button\" class=\"btn btn-default disabled\" title=\"Bold\">\n			<i class=\"fa fa-bold\"></i>\n		</button>\n		<button type=\"button\" class=\"btn btn-default disabled\" title=\"Italic\">\n			<i class=\"fa fa-italic\"></i>\n		</button>\n		<button type=\"button\" class=\"btn btn-default disabled\" title=\"Underline\">\n			<i class=\"fa fa-underline\"></i>\n		</button>\n		<div class=\"btn-separator\"></div>\n		<button type=\"button\" class=\"btn btn-default disabled\" title=\"Font color\">\n			<strong>F</strong>\n		</button>\n		<button type=\"button\" class=\"btn btn-default disabled\" title=\"Background color\">\n			<i class=\"fa fa-square\"></i>\n		</button>\n		<div class=\"btn-separator\"></div>\n		<button type=\"button\" class=\"btn btn-default disabled\" title=\"Background color\">\n			<i class=\"fa fa-align-left\"></i>\n		</button>\n		<button type=\"button\" class=\"btn btn-default disabled\" title=\"Background color\">\n			<i class=\"fa fa-align-center\"></i>\n		</button>\n		<button type=\"button\" class=\"btn btn-default disabled\" title=\"Background color\">\n			<i class=\"fa fa-align-right\"></i>\n		</button>\n		<button type=\"button\" class=\"btn btn-default disabled\" title=\"Background color\">\n			<i class=\"fa fa-align-justify\"></i>\n		</button>\n	</div>\n	<iframe class=\"badd-editor-browser\"></iframe>\n	<div class=\"badd-editor-browser-footer\"></div>\n</div>");
$templateCache.put("badd-editor.html","<table class=\"badd-editor\">\n	<tr>\n		<td class=\"badd-editor-components\">\n			<div class=\"badd-editor-components\">\n				<p class=\"badd-editor-title\">{{componentsTitle}}</p>\n				<ul>\n					<li ng-repeat=\"draggable in draggables\" data-element=\"{{draggable.element}}\" badd-draggable>\n						<i class=\"fa {{draggable.icon}}\"></i>\n						<span class=\"badd-editor-title\">{{draggable.title}}</span>\n					</li>\n				</ul>\n			</div>\n		</td>\n		<td class=\"badd-editor-browser\">\n			<badd-droppable-frame template=\"{{template}}\"></badd-droppable-frame>\n		</td>\n	</tr>\n</table>");}]);
!function(){var e=function(){function e(){return t.frameDocument.all?1:0}var t=this;t.TINY={},t.frameWindow=null,t.frameDocument=null,t.textArea=null,t.TINY.editor=function(){function i(i,o){this.editorName=i,this.t=t.textArea,this.obj=o,this.xhtml=o.xhtml;var r=t.frameDocument.createElement("div"),a=t.frameDocument.createElement("div"),l=t.frameDocument.createElement("div"),c=o.controls.length,h=0;for(this.i=t.frameDocument.createElement("iframe"),this.i.frameBorder=0,this.i.width=o.width||"500",this.i.height=o.height||"250",this.ie=e(),l.className=o.rowclass||"teheader",r.className=o.cssclass||"te",r.style.maxWidth=this.i.width+"px",r.appendChild(l),h;c>h;h++){var d=o.controls[h];if("n"==d)l=t.frameDocument.createElement("div"),l.className=o.rowclass||"teheader",r.appendChild(l);else if("|"==d){var m=t.frameDocument.createElement("div");m.className=o.dividerclass||"tedivider",l.appendChild(m)}else if("font"==d){var p=t.frameDocument.createElement("select"),u=o.fonts||["Verdana","Arial","Georgia"],f=u.length,g=0;for(p.className="tefont",p.onchange=new Function(this.editorName+'.ddaction(this,"fontname")'),p.options[0]=new Option("Font",""),g;f>g;g++){var v=u[g];p.options[g+1]=new Option(v,v)}l.appendChild(p)}else if("size"==d){var p=t.frameDocument.createElement("select"),y=o.sizes||[1,2,3,4,5,6,7],b=y.length,g=0;for(p.className="tesize",p.onchange=new Function(this.editorName+'.ddaction(this,"fontsize")'),g;b>g;g++){var w=y[g];p.options[g]=new Option(w,w)}l.appendChild(p)}else if("style"==d){var p=t.frameDocument.createElement("select"),N=o.styles||[["Style",""],["Paragraph","<p>"],["Header 1","<h1>"],["Header 2","<h2>"],["Header 3","<h3>"],["Header 4","<h4>"],["Header 5","<h5>"],["Header 6","<h6>"]],b=N.length,g=0;for(p.className="testyle",p.onchange=new Function(this.editorName+'.ddaction(this,"formatblock")'),g;b>g;g++){var x=N[g];p.options[g]=new Option(x[0],x[1])}l.appendChild(p)}else if(n[d]){var E,D=t.frameDocument.createElement("div"),g=n[d],C=g[2],k=g[0]*s;D.className=o.controlclass,D.style.backgroundPosition="0px "+k+"px",D.title=g[1],E="a"==C?'.action("'+g[3]+'",0,'+(g[4]||0)+")":'.insert("'+g[4]+'","'+g[5]+'","'+g[3]+'")',D.onclick=new Function(this.editorName+("print"==d?".print()":E)),D.onmouseover=new Function(this.editorName+".hover(this,"+k+",1)"),D.onmouseout=new Function(this.editorName+".hover(this,"+k+",0)"),l.appendChild(D),this.ie&&(D.unselectable="on")}}if(this.t.parentNode.insertBefore(r,this.t),this.t.style.width=this.i.width+"px",a.appendChild(this.t),a.appendChild(this.i),r.appendChild(a),this.t.style.display="none",o.footer){var $=t.frameDocument.createElement("div");if($.className=o.footerclass||"tefooter",o.toggle){var I=o.toggle,z=t.frameDocument.createElement("div");z.className=I.cssclass||"toggle",z.innerHTML=I.text||"source",z.onclick=new Function(this.editorName+".toggle(0,this);return false"),$.appendChild(z)}if(o.resize){var H=o.resize,L=t.frameDocument.createElement("div");L.className=H.cssclass||"resize",L.onmousedown=new Function("event",this.editorName+".resize(event);return false"),L.onselectstart=function(){return!1},$.appendChild(L)}r.appendChild($)}this.e=this.i.contentWindow.document,this.e.open();var T="<html><head>",F=o.bodyid?' id="'+o.bodyid+'"':"";if(T+='<link rel="stylesheet" href="tinyeditor.min.css" />',T+="</head><body"+F+">"+(o.content||this.t.value),T+="</body></html>",this.e.write(T),this.e.close(),this.e.designMode="on",this.d=1,this.xhtml)try{this.e.execCommand("styleWithCSS",0,0)}catch(S){try{this.e.execCommand("useCSS",0,1)}catch(S){}}}var n=[],s=-30;return n.cut=[1,"Cut","a","cut",1],n.copy=[2,"Copy","a","copy",1],n.paste=[3,"Paste","a","paste",1],n.bold=[4,"Bold","a","bold"],n.italic=[5,"Italic","a","italic"],n.underline=[6,"Underline","a","underline"],n.strikethrough=[7,"Strikethrough","a","strikethrough"],n.subscript=[8,"Subscript","a","subscript"],n.superscript=[9,"Superscript","a","superscript"],n.orderedlist=[10,"Insert Ordered List","a","insertorderedlist"],n.unorderedlist=[11,"Insert Unordered List","a","insertunorderedlist"],n.outdent=[12,"Outdent","a","outdent"],n.indent=[13,"Indent","a","indent"],n.leftalign=[14,"Left Align","a","justifyleft"],n.centeralign=[15,"Center Align","a","justifycenter"],n.rightalign=[16,"Right Align","a","justifyright"],n.blockjustify=[17,"Block Justify","a","justifyfull"],n.undo=[18,"Undo","a","undo"],n.redo=[19,"Redo","a","redo"],n.image=[20,"Insert Image","i","insertimage","Enter Image URL:","http://"],n.hr=[21,"Insert Horizontal Rule","a","inserthorizontalrule"],n.link=[22,"Insert Hyperlink","i","createlink","Enter URL:","http://"],n.unlink=[23,"Remove Hyperlink","a","unlink"],n.unformat=[24,"Remove Formatting","a","removeformat"],n.print=[25,"Print","a","print"],i.prototype.print=function(){this.i.contentWindow.print()},i.prototype.hover=function(e,t,i){e.style.backgroundPosition=(i?"34px ":"0px ")+t+"px"},i.prototype.ddaction=function(e,t){var i=e.selectedIndex,n=e.options[i].value;this.action(t,n)},i.prototype.action=function(e,t,i){i&&!this.ie?alert("Your browser does not support this function."):this.e.execCommand(e,0,t||null)},i.prototype.insert=function(e,t,i){var n=prompt(e,t);null!=n&&""!=n&&this.e.execCommand(i,0,n)},i.prototype.setfont=function(){execCommand("formatblock",0,hType)},i.prototype.resize=function(e){this.mv&&this.freeze(),this.i.bcs=t.TINY.cursor.top(e),this.mv=new Function("event",this.editorName+".move(event)"),this.sr=new Function(this.editorName+".freeze()"),this.ie?(t.frameDocument.attachEvent("onmousemove",this.mv),t.frameDocument.attachEvent("onmouseup",this.sr)):(t.frameDocument.addEventListener("mousemove",this.mv,1),t.frameDocument.addEventListener("mouseup",this.sr,1))},i.prototype.move=function(e){var i=t.TINY.cursor.top(e);this.i.height=parseInt(this.i.height)+i-this.i.bcs,this.i.bcs=i},i.prototype.freeze=function(){this.ie?(t.frameDocument.detachEvent("onmousemove",this.mv),t.frameDocument.detachEvent("onmouseup",this.sr)):(t.frameDocument.removeEventListener("mousemove",this.mv,1),t.frameDocument.removeEventListener("mouseup",this.sr,1))},i.prototype.toggle=function(e,t){if(this.d){var i=this.e.body.innerHTML;this.xhtml&&(i=i.replace(/<span class="apple-style-span">(.*)<\/span>/gi,"$1"),i=i.replace(/ class="apple-style-span"/gi,""),i=i.replace(/<span style="">/gi,""),i=i.replace(/<br>/gi,"<br />"),i=i.replace(/<br ?\/?>$/gi,""),i=i.replace(/^<br ?\/?>/gi,""),i=i.replace(/(<img [^>]+[^\/])>/gi,"$1 />"),i=i.replace(/<b\b[^>]*>(.*?)<\/b[^>]*>/gi,"<strong>$1</strong>"),i=i.replace(/<i\b[^>]*>(.*?)<\/i[^>]*>/gi,"<em>$1</em>"),i=i.replace(/<u\b[^>]*>(.*?)<\/u[^>]*>/gi,'<span style="text-decoration:underline">$1</span>'),i=i.replace(/<(b|strong|em|i|u) style="font-weight: normal;?">(.*)<\/(b|strong|em|i|u)>/gi,"$2"),i=i.replace(/<(b|strong|em|i|u) style="(.*)">(.*)<\/(b|strong|em|i|u)>/gi,'<span style="$2"><$4>$3</$4></span>'),i=i.replace(/<span style="font-weight: normal;?">(.*)<\/span>/gi,"$1"),i=i.replace(/<span style="font-weight: bold;?">(.*)<\/span>/gi,"<strong>$1</strong>"),i=i.replace(/<span style="font-style: italic;?">(.*)<\/span>/gi,"<em>$1</em>"),i=i.replace(/<span style="font-weight: bold;?">(.*)<\/span>|<b\b[^>]*>(.*?)<\/b[^>]*>/gi,"<strong>$1</strong>")),t&&(t.innerHTML=this.obj.toggle.activetext||"wysiwyg"),this.t.value=i,e||(this.t.style.height=this.i.height+"px",this.i.style.display="none",this.t.style.display="block",this.d=0)}else{var i=this.t.value;t&&(t.innerHTML=this.obj.toggle.text||"source"),this.xhtml&&!this.ie&&(i=i.replace(/<strong>(.*)<\/strong>/gi,'<span style="font-weight: bold;">$1</span>'),i=i.replace(/<em>(.*)<\/em>/gi,'<span style="font-weight: italic;">$1</span>')),this.e.body.innerHTML=i,this.t.style.display="none",this.i.style.display="block",this.d=1}},i.prototype.post=function(){this.d&&this.toggle(1)},{edit:i}}(),t.TINY.cursor=function(){return{top:function(i){return e()?t.window.event.clientY+t.frameDocument.documentElement.scrollTop+t.frameDocument.body.scrollTop:i.clientY+t.window.scrollY}}}()};angular.module("baddEditor").service("tinyEditorService",e)}();