!function(){var e=angular.module("baddEditor",[]),t=function(e,t){e.title=angular.isDefined(e.title)?e.title:"Bootstrap visual editor",e.componentsTitle=angular.isDefined(e.componentsTitle)?e.componentsTitle:"Components",e.propertiesTitle=angular.isDefined(e.propertiesTitle)?e.propertiesTitle:"Properties",t.addEventListener("message",function(){alert("received something")})};t.$inject=["$scope","$window"];var i=function(){return{restrict:"E",templateUrl:"badd-editor.html",scope:{title:"@",componentsTitle:"@",propertiesTitle:"@",template:"@"},controller:t}};e.directive("baddEditor",i)}();
!function(){var e=angular.module("baddEditor"),a=function(){return{restrict:"A",link:function(e,a){var r=$("iframe.badd-editor-browser").offset();r.left=r.left+62,r.top=r.top+22,a.draggable({revert:!1,helper:"clone",iframeFix:!0,cursorAt:r,drag:function(){$(this).addClass("drag-active"),$(this).closest(a).addClass("drag-active")},stop:function(e,r){$(this).removeClass("drag-active").closest(a).removeClass("drag-active")}})}}};e.directive("baddDraggable",a)}();
!function(){var e=angular.module("baddEditor"),t=function(e){return{restrict:"E",scope:{template:"@"},replace:!0,template:'<iframe class="badd-editor-browser"></iframe>',link:function(t,a,r){"IFRAME"===a.prop("tagName")&&(a.attr("src",r.template),a.load(function(){var r=a.contents().find("html");r.attr("ng-app","baddEditor");var d=r.find("head");d.append('<link rel="stylesheet" href="badd-editor-frame.min.css" type="text/css" />');var n=r.find("body");n.attr("badd-droppable",""),n.attr("ng-controller","editablePageController as ctrl");var l=n.find("div");l.attr("badd-droppable",""),l.attr("ng-click","ctrl.sendMessage()"),e(r)(t)}))}}};t.$inject=["$compile"],e.directive("baddDroppableFrame",t);var a=function(e){var t=this;t.message="Hello darling",t.sendMessage=function(){e.postMessage(t.message,"*")}};a.$inject=["$window"],e.controller("editablePageController",a)}();
!function(){var e=angular.module("baddEditor"),t=function(e){var t=this;return t.objectEntering=function(e,r){var i=$(this).offset(),a=$(this).outerWidth(),o=$(this).outerHeight(),n=$(this).parents("body");n.append('<div class="badd-highlighter" style="position: fixed; top: '+i.top+"px ; left: "+i.left+"px ; width: "+a+"px; height: "+o+'px; border: 2px dashed lightskyblue;" />'),t.objectPreview=$(r.draggable.data("raw")),$(this).append(t.objectPreview)},t.objectLeaving=function(e){var r=$(e.target).parents("body");r.find(".badd-highlighter").remove(),t.objectPreview&&t.objectPreview.remove()},t.objectDropped=function(r){return function(i,a){var o=angular.element(a.draggable).data("raw"),n=angular.element(a.draggable),d=angular.element(this);void 0==o&&(o=$(n)[0].outerHTML),e(o)(r).appendTo(d),t.objectLeaving(i)}},{restrict:"A",link:function(e,r,i){var a=i.greedy;void 0==a&&(a=!0),r.droppable({activeClass:"drop-active",greedy:a,hoverClass:"drop-hover",iframeFix:!0,tolerance:"intersect",over:t.objectEntering,out:t.objectLeaving,drop:t.objectDropped(e)})}}};t.$inject=["$compile"],e.directive("baddDroppable",t)}();
angular.module("baddEditor").run(["$templateCache", function($templateCache) {$templateCache.put("badd-editor.html","<table class=\"badd-editor\">\n	<tr>\n		<td class=\"badd-editor-header\" colspan=\"3\">\n			<div class=\"col-xs-12\">\n				<p class=\"title\">{{title}}</p>\n			</div>\n		</td>\n	</tr>\n	<tr>\n		<td class=\"badd-editor-components\">\n			<div class=\"components\">\n				<p class=\"title\">{{componentsTitle}}</p>\n				<ul>\n					<li badd-draggable data-raw=\"<button class=\'btn btn-primary\' style=\'float: right\' badd-draggable>New Button</button>\">\n						<div>\n							<img src=\"btn.png\" /> <span>Button</span><i class=\"fa fa-arrows-alt\"></i>\n						</div>\n					</li>\n				</ul>\n			</div>\n		</td>\n		<td class=\"badd-editor-browser\">\n			<badd-droppable-frame template=\"{{template}}\"></badd-droppable-frame>\n		</td>\n		<td class=\"badd-editor-properties\">\n			<div class=\"properties\">\n				<p class=\"title\">{{propertiesTitle}}</p>\n				hi\n			</div>\n		</td>\n	</tr>\n</table>");}]);